<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>function2</title>
</head>

<body id='bdy'>
    입력: <input type = 'text' id= 'inputVal' value= "">
    <button onclick= 'addFunc()'>추가</button>


    <script>
        console.log(this);

        const fruits = ['Apple', 'Banana', 'Charry', 'Melon', 'Plum'];

        function makeList() {
            let bodyTag = document.getElementById('bdy'); //id값으로 요소선택
            let ulTag = document.createElement('ul'); //ul 태그 생성

            for (let i = 0; i < fruits.length; i++) {
                // let fruitsTag = document.createElement('li'); //li 태그를 생성
                // let fru = document.createTextNode(fruits[i]); //텍스트 생성
                // fruitsTag.appendChild(fru);
                ulTag.appendChild(createList(fruits[i]));

            }
            bodyTag.appendChild(ulTag);
        }

        function createList(arg) {
            //<li>Apple<button onclick = 'delFunc()'>Delete</button></li>
            let liTag = document.createElement('li');
            let text = document.createTextNode(arg);

            let btn = document.createElement('button');
            let delText = document.createTextNode('delete');
            btn.appendChild(delText);
            btn.onclick = delFunc;

            liTag.appendChild(text);
            liTag.appendChild(btn);
            liTag.onmouseover= mousFunc;
            liTag.onmouseout= mout;
            return liTag;
        }

        function mout(){
            this.style.color = null;
        }

        function mousFunc(){
            this.style.color = 'red';
        }

        function delFunc(){
            console.log(this); // 이벤트일 경우에 this는 이벤트가 발생하는 element.
            this.parentNode.remove();
        }
        //사용자 입력ㄱ값을 사용해서 ul 하위의 자식으로 appand.
        function addFunc(){
            let userInput = document.getElementById('inputVal').value;
            console.log(userInput);
            let li = createList(userInput); //<li>사용자입력값<button></button><li>
                console.log(li);
            let ulTag = document.getElementsByTagName('ul');
            console.log(ulTag[0]);
            ulTag[0].appendChild(li);
        }

        makeList(); //호출을 해야 실행이 된다.
    </script>
</body>

</html>